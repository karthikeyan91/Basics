"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/secret-santa/data";
exports.ids = ["pages/api/secret-santa/data"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fdata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fdata.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fdata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fdata.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_secret_santa_data_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/secret-santa/data.js */ \"(api)/./pages/api/secret-santa/data.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_secret_santa_data_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_secret_santa_data_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/secret-santa/data\",\n        pathname: \"/api/secret-santa/data\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_secret_santa_data_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNlY3JldC1zYW50YSUyRmRhdGEmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnNlY3JldC1zYW50YSUyRmRhdGEuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yc3MtZmVlZC12aWV3ZXIvPzVlZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zZWNyZXQtc2FudGEvZGF0YS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NlY3JldC1zYW50YS9kYXRhXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2VjcmV0LXNhbnRhL2RhdGFcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fdata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fdata.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/secret-santa/data.js":
/*!****************************************!*\
  !*** ./pages/api/secret-santa/data.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Path to our data file\nconst dataFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\", \"secret-santa.json\");\n// Ensure the data directory exists\nfunction ensureDataDirectoryExists() {\n    const dataDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\");\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dataDir)) {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dataDir, {\n            recursive: true\n        });\n    }\n}\n// Initialize data file if it doesn't exist\nfunction initializeDataFile() {\n    ensureDataDirectoryExists();\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dataFilePath)) {\n        const initialData = {\n            users: [],\n            events: [],\n            assignments: []\n        };\n        fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(dataFilePath, JSON.stringify(initialData, null, 2));\n        return initialData;\n    }\n    return JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(dataFilePath, \"utf8\"));\n}\n// Read data from file\nfunction readData() {\n    try {\n        if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dataFilePath)) {\n            return initializeDataFile();\n        }\n        return JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(dataFilePath, \"utf8\"));\n    } catch (error) {\n        console.error(\"Error reading data file:\", error);\n        return {\n            users: [],\n            events: [],\n            assignments: []\n        };\n    }\n}\n// Write data to file\nfunction writeData(data) {\n    try {\n        ensureDataDirectoryExists();\n        fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(dataFilePath, JSON.stringify(data, null, 2));\n        return true;\n    } catch (error) {\n        console.error(\"Error writing data file:\", error);\n        return false;\n    }\n}\nasync function handler(req, res) {\n    // Only allow specific methods\n    if (![\n        \"GET\",\n        \"POST\",\n        \"PUT\",\n        \"DELETE\"\n    ].includes(req.method)) {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    // Initialize data if needed\n    let data = readData();\n    // Handle GET request - retrieve data\n    if (req.method === \"GET\") {\n        const { type, id, userId, role } = req.query;\n        // If no type specified, return error\n        if (!type) {\n            return res.status(400).json({\n                error: \"Type parameter is required\"\n            });\n        }\n        // Return data based on type\n        switch(type){\n            case \"users\":\n                // If admin, return all users\n                if (role === \"admin\") {\n                    return res.status(200).json(id ? data.users.find((u)=>u.id === id) : data.users);\n                } else if (id && userId) {\n                    // Check if the requester has an assignment where the requested user is the receiver\n                    const hasAssignment = data.assignments.some((a)=>a.giverId === userId && a.receiverId === id);\n                    // Allow access if the requester is requesting their own info or has an assignment with the requested user\n                    if (id === userId || hasAssignment) {\n                        return res.status(200).json(data.users.find((u)=>u.id === id));\n                    }\n                } else if (userId) {\n                    return res.status(200).json(data.users.find((u)=>u.id === userId));\n                }\n                return res.status(403).json({\n                    error: \"Unauthorized\"\n                });\n            case \"events\":\n                // If admin, return all events, otherwise return events the user is part of\n                if (role === \"admin\") {\n                    return res.status(200).json(id ? data.events.find((e)=>e.id === id) : data.events);\n                } else if (userId) {\n                    const userEvents = data.events.filter((e)=>e.participants.includes(userId) || e.adminId === userId);\n                    return res.status(200).json(id ? userEvents.find((e)=>e.id === id) : userEvents);\n                }\n                return res.status(403).json({\n                    error: \"Unauthorized\"\n                });\n            case \"assignments\":\n                // If admin, return all assignments for an event, otherwise return only the user's assignment\n                if (id) {\n                    const event = data.events.find((e)=>e.id === id);\n                    if (!event) {\n                        return res.status(404).json({\n                            error: \"Event not found\"\n                        });\n                    }\n                    if (role === \"admin\" || event.adminId === userId) {\n                        return res.status(200).json(data.assignments.filter((a)=>a.eventId === id));\n                    } else if (userId) {\n                        return res.status(200).json(data.assignments.find((a)=>a.eventId === id && a.giverId === userId));\n                    }\n                }\n                return res.status(400).json({\n                    error: \"Event ID is required\"\n                });\n            default:\n                return res.status(400).json({\n                    error: \"Invalid type parameter\"\n                });\n        }\n    }\n    // Handle POST request - create new data\n    if (req.method === \"POST\") {\n        const { type, userId, role } = req.query;\n        const payload = req.body;\n        if (!type || !payload) {\n            return res.status(400).json({\n                error: \"Type parameter and request body are required\"\n            });\n        }\n        switch(type){\n            case \"users\":\n                // Anyone can create a user (sign up)\n                if (!payload.username || !payload.password) {\n                    return res.status(400).json({\n                        error: \"Username and password are required\"\n                    });\n                }\n                // Check if username already exists\n                if (data.users.some((u)=>u.username === payload.username)) {\n                    return res.status(409).json({\n                        error: \"Username already exists\"\n                    });\n                }\n                // Create new user\n                const newUser = {\n                    id: Date.now().toString(),\n                    username: payload.username,\n                    password: payload.password,\n                    role: payload.role || \"participant\" // Default to participant role\n                };\n                data.users.push(newUser);\n                writeData(data);\n                // Don't return the password in the response\n                const { password, ...userWithoutPassword } = newUser;\n                return res.status(201).json(userWithoutPassword);\n            case \"events\":\n                // Only authenticated users can create events\n                if (!userId) {\n                    return res.status(401).json({\n                        error: \"Authentication required\"\n                    });\n                }\n                if (!payload.name) {\n                    return res.status(400).json({\n                        error: \"Event name is required\"\n                    });\n                }\n                // Create new event\n                const newEvent = {\n                    id: Date.now().toString(),\n                    name: payload.name,\n                    description: payload.description || \"\",\n                    adminId: userId,\n                    participants: payload.participants || [],\n                    created: new Date().toISOString()\n                };\n                data.events.push(newEvent);\n                writeData(data);\n                return res.status(201).json(newEvent);\n            case \"assignments\":\n                // Only admin can generate assignments\n                if (role !== \"admin\" && !data.events.some((e)=>e.id === payload.eventId && e.adminId === userId)) {\n                    return res.status(403).json({\n                        error: \"Only the event admin can generate assignments\"\n                    });\n                }\n                if (!payload.eventId) {\n                    return res.status(400).json({\n                        error: \"Event ID is required\"\n                    });\n                }\n                const event = data.events.find((e)=>e.id === payload.eventId);\n                if (!event) {\n                    return res.status(404).json({\n                        error: \"Event not found\"\n                    });\n                }\n                // Check if there are enough participants\n                if (event.participants.length < 3) {\n                    return res.status(400).json({\n                        error: \"At least 3 participants are required\"\n                    });\n                }\n                // Generate assignments\n                const givers = [\n                    ...event.participants\n                ];\n                const receivers = [\n                    ...event.participants\n                ];\n                let validAssignment = false;\n                let attempts = 0;\n                let newAssignments = [];\n                // Try to generate valid assignments (no one gets themselves)\n                while(!validAssignment && attempts < 100){\n                    attempts++;\n                    // Shuffle the receivers array\n                    for(let i = receivers.length - 1; i > 0; i--){\n                        const j = Math.floor(Math.random() * (i + 1));\n                        [receivers[i], receivers[j]] = [\n                            receivers[j],\n                            receivers[i]\n                        ];\n                    }\n                    // Check if any person got themselves\n                    const selfAssignment = givers.some((giver, index)=>giver === receivers[index]);\n                    if (!selfAssignment) {\n                        validAssignment = true;\n                        newAssignments = givers.map((giver, index)=>({\n                                id: Date.now().toString() + index,\n                                eventId: payload.eventId,\n                                giverId: giver,\n                                receiverId: receivers[index],\n                                created: new Date().toISOString()\n                            }));\n                    }\n                }\n                if (!validAssignment) {\n                    return res.status(500).json({\n                        error: \"Failed to generate valid assignments\"\n                    });\n                }\n                // Remove any existing assignments for this event\n                data.assignments = data.assignments.filter((a)=>a.eventId !== payload.eventId);\n                // Add new assignments\n                data.assignments.push(...newAssignments);\n                writeData(data);\n                return res.status(201).json(newAssignments);\n            default:\n                return res.status(400).json({\n                    error: \"Invalid type parameter\"\n                });\n        }\n    }\n    // Handle PUT request - update existing data\n    if (req.method === \"PUT\") {\n        const { type, id, userId, role } = req.query;\n        const payload = req.body;\n        if (!type || !id || !payload) {\n            return res.status(400).json({\n                error: \"Type parameter, ID, and request body are required\"\n            });\n        }\n        switch(type){\n            case \"users\":\n                // Users can only update their own data, admins can update any user\n                const userToUpdate = data.users.find((u)=>u.id === id);\n                if (!userToUpdate) {\n                    return res.status(404).json({\n                        error: \"User not found\"\n                    });\n                }\n                if (role !== \"admin\" && userId !== id) {\n                    return res.status(403).json({\n                        error: \"Unauthorized\"\n                    });\n                }\n                // Update user data\n                Object.assign(userToUpdate, payload);\n                writeData(data);\n                // Don't return the password in the response\n                const { password, ...userWithoutPassword } = userToUpdate;\n                return res.status(200).json(userWithoutPassword);\n            case \"events\":\n                // Only the event admin can update the event\n                const eventToUpdate = data.events.find((e)=>e.id === id);\n                if (!eventToUpdate) {\n                    return res.status(404).json({\n                        error: \"Event not found\"\n                    });\n                }\n                if (role !== \"admin\" && eventToUpdate.adminId !== userId) {\n                    return res.status(403).json({\n                        error: \"Only the event admin can update the event\"\n                    });\n                }\n                // Update event data\n                Object.assign(eventToUpdate, payload);\n                writeData(data);\n                return res.status(200).json(eventToUpdate);\n            default:\n                return res.status(400).json({\n                    error: \"Invalid type parameter\"\n                });\n        }\n    }\n    // Handle DELETE request - delete data\n    if (req.method === \"DELETE\") {\n        const { type, id, userId, role } = req.query;\n        if (!type || !id) {\n            return res.status(400).json({\n                error: \"Type parameter and ID are required\"\n            });\n        }\n        switch(type){\n            case \"users\":\n                // Only admins can delete users\n                if (role !== \"admin\") {\n                    return res.status(403).json({\n                        error: \"Only admins can delete users\"\n                    });\n                }\n                const userIndex = data.users.findIndex((u)=>u.id === id);\n                if (userIndex === -1) {\n                    return res.status(404).json({\n                        error: \"User not found\"\n                    });\n                }\n                // Delete user\n                const deletedUser = data.users.splice(userIndex, 1)[0];\n                writeData(data);\n                return res.status(200).json({\n                    message: \"User deleted successfully\",\n                    user: deletedUser\n                });\n            case \"events\":\n                // Only the event admin can delete the event\n                const eventIndex = data.events.findIndex((e)=>e.id === id);\n                if (eventIndex === -1) {\n                    return res.status(404).json({\n                        error: \"Event not found\"\n                    });\n                }\n                if (role !== \"admin\" && data.events[eventIndex].adminId !== userId) {\n                    return res.status(403).json({\n                        error: \"Only the event admin can delete the event\"\n                    });\n                }\n                // Delete event and its assignments\n                const deletedEvent = data.events.splice(eventIndex, 1)[0];\n                data.assignments = data.assignments.filter((a)=>a.eventId !== id);\n                writeData(data);\n                return res.status(200).json({\n                    message: \"Event deleted successfully\",\n                    event: deletedEvent\n                });\n            default:\n                return res.status(400).json({\n                    error: \"Invalid type parameter\"\n                });\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsRUFBRTtnQkFDekRuRSxLQUFLVixXQUFXLEdBQUdVLEtBQUtWLFdBQVcsQ0FBQ2dDLE1BQU0sQ0FBQ0wsQ0FBQUEsSUFBS0EsRUFBRVMsT0FBTyxLQUFLakI7Z0JBQzlEVixVQUFVQztnQkFFVixPQUFPRyxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFMEQsU0FBUztvQkFBOEJ4QyxPQUFPMkM7Z0JBQWE7WUFFM0Y7Z0JBQ0UsT0FBT2pFLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVWLE9BQU87Z0JBQXlCO1FBQ2xFO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Jzcy1mZWVkLXZpZXdlci8uL3BhZ2VzL2FwaS9zZWNyZXQtc2FudGEvZGF0YS5qcz8yNWVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8gUGF0aCB0byBvdXIgZGF0YSBmaWxlXG5jb25zdCBkYXRhRmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAnc2VjcmV0LXNhbnRhLmpzb24nKTtcblxuLy8gRW5zdXJlIHRoZSBkYXRhIGRpcmVjdG9yeSBleGlzdHNcbmZ1bmN0aW9uIGVuc3VyZURhdGFEaXJlY3RvcnlFeGlzdHMoKSB7XG4gIGNvbnN0IGRhdGFEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKGRhdGFEaXIpKSB7XG4gICAgZnMubWtkaXJTeW5jKGRhdGFEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICB9XG59XG5cbi8vIEluaXRpYWxpemUgZGF0YSBmaWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbmZ1bmN0aW9uIGluaXRpYWxpemVEYXRhRmlsZSgpIHtcbiAgZW5zdXJlRGF0YURpcmVjdG9yeUV4aXN0cygpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyhkYXRhRmlsZVBhdGgpKSB7XG4gICAgY29uc3QgaW5pdGlhbERhdGEgPSB7XG4gICAgICB1c2VyczogW10sXG4gICAgICBldmVudHM6IFtdLFxuICAgICAgYXNzaWdubWVudHM6IFtdXG4gICAgfTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKGRhdGFGaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoaW5pdGlhbERhdGEsIG51bGwsIDIpKTtcbiAgICByZXR1cm4gaW5pdGlhbERhdGE7XG4gIH1cblxuICByZXR1cm4gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoZGF0YUZpbGVQYXRoLCAndXRmOCcpKTtcbn1cblxuLy8gUmVhZCBkYXRhIGZyb20gZmlsZVxuZnVuY3Rpb24gcmVhZERhdGEoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGRhdGFGaWxlUGF0aCkpIHtcbiAgICAgIHJldHVybiBpbml0aWFsaXplRGF0YUZpbGUoKTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKGRhdGFGaWxlUGF0aCwgJ3V0ZjgnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBkYXRhIGZpbGU6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHVzZXJzOiBbXSwgZXZlbnRzOiBbXSwgYXNzaWdubWVudHM6IFtdIH07XG4gIH1cbn1cblxuLy8gV3JpdGUgZGF0YSB0byBmaWxlXG5mdW5jdGlvbiB3cml0ZURhdGEoZGF0YSkge1xuICB0cnkge1xuICAgIGVuc3VyZURhdGFEaXJlY3RvcnlFeGlzdHMoKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKGRhdGFGaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdyaXRpbmcgZGF0YSBmaWxlOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAvLyBPbmx5IGFsbG93IHNwZWNpZmljIG1ldGhvZHNcbiAgaWYgKCFbJ0dFVCcsICdQT1NUJywgJ1BVVCcsICdERUxFVEUnXS5pbmNsdWRlcyhyZXEubWV0aG9kKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgZGF0YSBpZiBuZWVkZWRcbiAgbGV0IGRhdGEgPSByZWFkRGF0YSgpO1xuXG4gIC8vIEhhbmRsZSBHRVQgcmVxdWVzdCAtIHJldHJpZXZlIGRhdGFcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgY29uc3QgeyB0eXBlLCBpZCwgdXNlcklkLCByb2xlIH0gPSByZXEucXVlcnk7XG5cbiAgICAvLyBJZiBubyB0eXBlIHNwZWNpZmllZCwgcmV0dXJuIGVycm9yXG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1R5cGUgcGFyYW1ldGVyIGlzIHJlcXVpcmVkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gZGF0YSBiYXNlZCBvbiB0eXBlXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICd1c2Vycyc6XG4gICAgICAgIC8vIElmIGFkbWluLCByZXR1cm4gYWxsIHVzZXJzXG4gICAgICAgIGlmIChyb2xlID09PSAnYWRtaW4nKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGlkID8gZGF0YS51c2Vycy5maW5kKHUgPT4gdS5pZCA9PT0gaWQpIDogZGF0YS51c2Vycyk7XG4gICAgICAgIH0gXG4gICAgICAgIC8vIElmIGEgc3BlY2lmaWMgdXNlciBJRCBpcyByZXF1ZXN0ZWQgYW5kIHRoZSByZXF1ZXN0ZXIgaXMgYSBwYXJ0aWNpcGFudFxuICAgICAgICBlbHNlIGlmIChpZCAmJiB1c2VySWQpIHtcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVxdWVzdGVyIGhhcyBhbiBhc3NpZ25tZW50IHdoZXJlIHRoZSByZXF1ZXN0ZWQgdXNlciBpcyB0aGUgcmVjZWl2ZXJcbiAgICAgICAgICBjb25zdCBoYXNBc3NpZ25tZW50ID0gZGF0YS5hc3NpZ25tZW50cy5zb21lKGEgPT4gXG4gICAgICAgICAgICBhLmdpdmVySWQgPT09IHVzZXJJZCAmJiBhLnJlY2VpdmVySWQgPT09IGlkXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEFsbG93IGFjY2VzcyBpZiB0aGUgcmVxdWVzdGVyIGlzIHJlcXVlc3RpbmcgdGhlaXIgb3duIGluZm8gb3IgaGFzIGFuIGFzc2lnbm1lbnQgd2l0aCB0aGUgcmVxdWVzdGVkIHVzZXJcbiAgICAgICAgICBpZiAoaWQgPT09IHVzZXJJZCB8fCBoYXNBc3NpZ25tZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YS51c2Vycy5maW5kKHUgPT4gdS5pZCA9PT0gaWQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gXG4gICAgICAgIC8vIElmIG5vIHNwZWNpZmljIElEIGlzIHJlcXVlc3RlZCwgcmV0dXJuIG9ubHkgdGhlIHJlcXVlc3RpbmcgdXNlclxuICAgICAgICBlbHNlIGlmICh1c2VySWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YS51c2Vycy5maW5kKHUgPT4gdS5pZCA9PT0gdXNlcklkKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG5cbiAgICAgIGNhc2UgJ2V2ZW50cyc6XG4gICAgICAgIC8vIElmIGFkbWluLCByZXR1cm4gYWxsIGV2ZW50cywgb3RoZXJ3aXNlIHJldHVybiBldmVudHMgdGhlIHVzZXIgaXMgcGFydCBvZlxuICAgICAgICBpZiAocm9sZSA9PT0gJ2FkbWluJykge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihpZCA/IGRhdGEuZXZlbnRzLmZpbmQoZSA9PiBlLmlkID09PSBpZCkgOiBkYXRhLmV2ZW50cyk7XG4gICAgICAgIH0gZWxzZSBpZiAodXNlcklkKSB7XG4gICAgICAgICAgY29uc3QgdXNlckV2ZW50cyA9IGRhdGEuZXZlbnRzLmZpbHRlcihlID0+IFxuICAgICAgICAgICAgZS5wYXJ0aWNpcGFudHMuaW5jbHVkZXModXNlcklkKSB8fCBlLmFkbWluSWQgPT09IHVzZXJJZFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGlkID8gdXNlckV2ZW50cy5maW5kKGUgPT4gZS5pZCA9PT0gaWQpIDogdXNlckV2ZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuXG4gICAgICBjYXNlICdhc3NpZ25tZW50cyc6XG4gICAgICAgIC8vIElmIGFkbWluLCByZXR1cm4gYWxsIGFzc2lnbm1lbnRzIGZvciBhbiBldmVudCwgb3RoZXJ3aXNlIHJldHVybiBvbmx5IHRoZSB1c2VyJ3MgYXNzaWdubWVudFxuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICBjb25zdCBldmVudCA9IGRhdGEuZXZlbnRzLmZpbmQoZSA9PiBlLmlkID09PSBpZCk7XG4gICAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdFdmVudCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyb2xlID09PSAnYWRtaW4nIHx8IGV2ZW50LmFkbWluSWQgPT09IHVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEuYXNzaWdubWVudHMuZmlsdGVyKGEgPT4gYS5ldmVudElkID09PSBpZCkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oXG4gICAgICAgICAgICAgIGRhdGEuYXNzaWdubWVudHMuZmluZChhID0+IGEuZXZlbnRJZCA9PT0gaWQgJiYgYS5naXZlcklkID09PSB1c2VySWQpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0V2ZW50IElEIGlzIHJlcXVpcmVkJyB9KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHR5cGUgcGFyYW1ldGVyJyB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgUE9TVCByZXF1ZXN0IC0gY3JlYXRlIG5ldyBkYXRhXG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICBjb25zdCB7IHR5cGUsIHVzZXJJZCwgcm9sZSB9ID0gcmVxLnF1ZXJ5O1xuICAgIGNvbnN0IHBheWxvYWQgPSByZXEuYm9keTtcblxuICAgIGlmICghdHlwZSB8fCAhcGF5bG9hZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUeXBlIHBhcmFtZXRlciBhbmQgcmVxdWVzdCBib2R5IGFyZSByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICd1c2Vycyc6XG4gICAgICAgIC8vIEFueW9uZSBjYW4gY3JlYXRlIGEgdXNlciAoc2lnbiB1cClcbiAgICAgICAgaWYgKCFwYXlsb2FkLnVzZXJuYW1lIHx8ICFwYXlsb2FkLnBhc3N3b3JkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdVc2VybmFtZSBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXJuYW1lIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGlmIChkYXRhLnVzZXJzLnNvbWUodSA9PiB1LnVzZXJuYW1lID09PSBwYXlsb2FkLnVzZXJuYW1lKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnVXNlcm5hbWUgYWxyZWFkeSBleGlzdHMnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIG5ldyB1c2VyXG4gICAgICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICB1c2VybmFtZTogcGF5bG9hZC51c2VybmFtZSxcbiAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZCwgLy8gSW4gYSByZWFsIGFwcCwgdGhpcyBzaG91bGQgYmUgaGFzaGVkXG4gICAgICAgICAgcm9sZTogcGF5bG9hZC5yb2xlIHx8ICdwYXJ0aWNpcGFudCcgLy8gRGVmYXVsdCB0byBwYXJ0aWNpcGFudCByb2xlXG4gICAgICAgIH07XG5cbiAgICAgICAgZGF0YS51c2Vycy5wdXNoKG5ld1VzZXIpO1xuICAgICAgICB3cml0ZURhdGEoZGF0YSk7XG5cbiAgICAgICAgLy8gRG9uJ3QgcmV0dXJuIHRoZSBwYXNzd29yZCBpbiB0aGUgcmVzcG9uc2VcbiAgICAgICAgY29uc3QgeyBwYXNzd29yZCwgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gbmV3VXNlcjtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHVzZXJXaXRob3V0UGFzc3dvcmQpO1xuXG4gICAgICBjYXNlICdldmVudHMnOlxuICAgICAgICAvLyBPbmx5IGF1dGhlbnRpY2F0ZWQgdXNlcnMgY2FuIGNyZWF0ZSBldmVudHNcbiAgICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5bG9hZC5uYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdFdmVudCBuYW1lIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBuZXcgZXZlbnRcbiAgICAgICAgY29uc3QgbmV3RXZlbnQgPSB7XG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICBuYW1lOiBwYXlsb2FkLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHBheWxvYWQuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgYWRtaW5JZDogdXNlcklkLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogcGF5bG9hZC5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH07XG5cbiAgICAgICAgZGF0YS5ldmVudHMucHVzaChuZXdFdmVudCk7XG4gICAgICAgIHdyaXRlRGF0YShkYXRhKTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24obmV3RXZlbnQpO1xuXG4gICAgICBjYXNlICdhc3NpZ25tZW50cyc6XG4gICAgICAgIC8vIE9ubHkgYWRtaW4gY2FuIGdlbmVyYXRlIGFzc2lnbm1lbnRzXG4gICAgICAgIGlmIChyb2xlICE9PSAnYWRtaW4nICYmICFkYXRhLmV2ZW50cy5zb21lKGUgPT4gZS5pZCA9PT0gcGF5bG9hZC5ldmVudElkICYmIGUuYWRtaW5JZCA9PT0gdXNlcklkKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnT25seSB0aGUgZXZlbnQgYWRtaW4gY2FuIGdlbmVyYXRlIGFzc2lnbm1lbnRzJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5bG9hZC5ldmVudElkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdFdmVudCBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudCA9IGRhdGEuZXZlbnRzLmZpbmQoZSA9PiBlLmlkID09PSBwYXlsb2FkLmV2ZW50SWQpO1xuICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdFdmVudCBub3QgZm91bmQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGVub3VnaCBwYXJ0aWNpcGFudHNcbiAgICAgICAgaWYgKGV2ZW50LnBhcnRpY2lwYW50cy5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBdCBsZWFzdCAzIHBhcnRpY2lwYW50cyBhcmUgcmVxdWlyZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgYXNzaWdubWVudHNcbiAgICAgICAgY29uc3QgZ2l2ZXJzID0gWy4uLmV2ZW50LnBhcnRpY2lwYW50c107XG4gICAgICAgIGNvbnN0IHJlY2VpdmVycyA9IFsuLi5ldmVudC5wYXJ0aWNpcGFudHNdO1xuICAgICAgICBsZXQgdmFsaWRBc3NpZ25tZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgICAgIGxldCBuZXdBc3NpZ25tZW50cyA9IFtdO1xuXG4gICAgICAgIC8vIFRyeSB0byBnZW5lcmF0ZSB2YWxpZCBhc3NpZ25tZW50cyAobm8gb25lIGdldHMgdGhlbXNlbHZlcylcbiAgICAgICAgd2hpbGUgKCF2YWxpZEFzc2lnbm1lbnQgJiYgYXR0ZW1wdHMgPCAxMDApIHtcbiAgICAgICAgICBhdHRlbXB0cysrO1xuXG4gICAgICAgICAgLy8gU2h1ZmZsZSB0aGUgcmVjZWl2ZXJzIGFycmF5XG4gICAgICAgICAgZm9yIChsZXQgaSA9IHJlY2VpdmVycy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgICAgICBbcmVjZWl2ZXJzW2ldLCByZWNlaXZlcnNbal1dID0gW3JlY2VpdmVyc1tqXSwgcmVjZWl2ZXJzW2ldXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgcGVyc29uIGdvdCB0aGVtc2VsdmVzXG4gICAgICAgICAgY29uc3Qgc2VsZkFzc2lnbm1lbnQgPSBnaXZlcnMuc29tZSgoZ2l2ZXIsIGluZGV4KSA9PiBnaXZlciA9PT0gcmVjZWl2ZXJzW2luZGV4XSk7XG5cbiAgICAgICAgICBpZiAoIXNlbGZBc3NpZ25tZW50KSB7XG4gICAgICAgICAgICB2YWxpZEFzc2lnbm1lbnQgPSB0cnVlO1xuICAgICAgICAgICAgbmV3QXNzaWdubWVudHMgPSBnaXZlcnMubWFwKChnaXZlciwgaW5kZXgpID0+ICh7XG4gICAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCkgKyBpbmRleCxcbiAgICAgICAgICAgICAgZXZlbnRJZDogcGF5bG9hZC5ldmVudElkLFxuICAgICAgICAgICAgICBnaXZlcklkOiBnaXZlcixcbiAgICAgICAgICAgICAgcmVjZWl2ZXJJZDogcmVjZWl2ZXJzW2luZGV4XSxcbiAgICAgICAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWxpZEFzc2lnbm1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSB2YWxpZCBhc3NpZ25tZW50cycgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgYW55IGV4aXN0aW5nIGFzc2lnbm1lbnRzIGZvciB0aGlzIGV2ZW50XG4gICAgICAgIGRhdGEuYXNzaWdubWVudHMgPSBkYXRhLmFzc2lnbm1lbnRzLmZpbHRlcihhID0+IGEuZXZlbnRJZCAhPT0gcGF5bG9hZC5ldmVudElkKTtcblxuICAgICAgICAvLyBBZGQgbmV3IGFzc2lnbm1lbnRzXG4gICAgICAgIGRhdGEuYXNzaWdubWVudHMucHVzaCguLi5uZXdBc3NpZ25tZW50cyk7XG4gICAgICAgIHdyaXRlRGF0YShkYXRhKTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24obmV3QXNzaWdubWVudHMpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdHlwZSBwYXJhbWV0ZXInIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBQVVQgcmVxdWVzdCAtIHVwZGF0ZSBleGlzdGluZyBkYXRhXG4gIGlmIChyZXEubWV0aG9kID09PSAnUFVUJykge1xuICAgIGNvbnN0IHsgdHlwZSwgaWQsIHVzZXJJZCwgcm9sZSB9ID0gcmVxLnF1ZXJ5O1xuICAgIGNvbnN0IHBheWxvYWQgPSByZXEuYm9keTtcblxuICAgIGlmICghdHlwZSB8fCAhaWQgfHwgIXBheWxvYWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVHlwZSBwYXJhbWV0ZXIsIElELCBhbmQgcmVxdWVzdCBib2R5IGFyZSByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICd1c2Vycyc6XG4gICAgICAgIC8vIFVzZXJzIGNhbiBvbmx5IHVwZGF0ZSB0aGVpciBvd24gZGF0YSwgYWRtaW5zIGNhbiB1cGRhdGUgYW55IHVzZXJcbiAgICAgICAgY29uc3QgdXNlclRvVXBkYXRlID0gZGF0YS51c2Vycy5maW5kKHUgPT4gdS5pZCA9PT0gaWQpO1xuXG4gICAgICAgIGlmICghdXNlclRvVXBkYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocm9sZSAhPT0gJ2FkbWluJyAmJiB1c2VySWQgIT09IGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHVzZXIgZGF0YVxuICAgICAgICBPYmplY3QuYXNzaWduKHVzZXJUb1VwZGF0ZSwgcGF5bG9hZCk7XG4gICAgICAgIHdyaXRlRGF0YShkYXRhKTtcblxuICAgICAgICAvLyBEb24ndCByZXR1cm4gdGhlIHBhc3N3b3JkIGluIHRoZSByZXNwb25zZVxuICAgICAgICBjb25zdCB7IHBhc3N3b3JkLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyVG9VcGRhdGU7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih1c2VyV2l0aG91dFBhc3N3b3JkKTtcblxuICAgICAgY2FzZSAnZXZlbnRzJzpcbiAgICAgICAgLy8gT25seSB0aGUgZXZlbnQgYWRtaW4gY2FuIHVwZGF0ZSB0aGUgZXZlbnRcbiAgICAgICAgY29uc3QgZXZlbnRUb1VwZGF0ZSA9IGRhdGEuZXZlbnRzLmZpbmQoZSA9PiBlLmlkID09PSBpZCk7XG5cbiAgICAgICAgaWYgKCFldmVudFRvVXBkYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdFdmVudCBub3QgZm91bmQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJvbGUgIT09ICdhZG1pbicgJiYgZXZlbnRUb1VwZGF0ZS5hZG1pbklkICE9PSB1c2VySWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ09ubHkgdGhlIGV2ZW50IGFkbWluIGNhbiB1cGRhdGUgdGhlIGV2ZW50JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBldmVudCBkYXRhXG4gICAgICAgIE9iamVjdC5hc3NpZ24oZXZlbnRUb1VwZGF0ZSwgcGF5bG9hZCk7XG4gICAgICAgIHdyaXRlRGF0YShkYXRhKTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZXZlbnRUb1VwZGF0ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCB0eXBlIHBhcmFtZXRlcicgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIERFTEVURSByZXF1ZXN0IC0gZGVsZXRlIGRhdGFcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdERUxFVEUnKSB7XG4gICAgY29uc3QgeyB0eXBlLCBpZCwgdXNlcklkLCByb2xlIH0gPSByZXEucXVlcnk7XG5cbiAgICBpZiAoIXR5cGUgfHwgIWlkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1R5cGUgcGFyYW1ldGVyIGFuZCBJRCBhcmUgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAndXNlcnMnOlxuICAgICAgICAvLyBPbmx5IGFkbWlucyBjYW4gZGVsZXRlIHVzZXJzXG4gICAgICAgIGlmIChyb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdPbmx5IGFkbWlucyBjYW4gZGVsZXRlIHVzZXJzJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXJJbmRleCA9IGRhdGEudXNlcnMuZmluZEluZGV4KHUgPT4gdS5pZCA9PT0gaWQpO1xuXG4gICAgICAgIGlmICh1c2VySW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWxldGUgdXNlclxuICAgICAgICBjb25zdCBkZWxldGVkVXNlciA9IGRhdGEudXNlcnMuc3BsaWNlKHVzZXJJbmRleCwgMSlbMF07XG4gICAgICAgIHdyaXRlRGF0YShkYXRhKTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBkZWxldGVkIHN1Y2Nlc3NmdWxseScsIHVzZXI6IGRlbGV0ZWRVc2VyIH0pO1xuXG4gICAgICBjYXNlICdldmVudHMnOlxuICAgICAgICAvLyBPbmx5IHRoZSBldmVudCBhZG1pbiBjYW4gZGVsZXRlIHRoZSBldmVudFxuICAgICAgICBjb25zdCBldmVudEluZGV4ID0gZGF0YS5ldmVudHMuZmluZEluZGV4KGUgPT4gZS5pZCA9PT0gaWQpO1xuXG4gICAgICAgIGlmIChldmVudEluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnRXZlbnQgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyb2xlICE9PSAnYWRtaW4nICYmIGRhdGEuZXZlbnRzW2V2ZW50SW5kZXhdLmFkbWluSWQgIT09IHVzZXJJZCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnT25seSB0aGUgZXZlbnQgYWRtaW4gY2FuIGRlbGV0ZSB0aGUgZXZlbnQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVsZXRlIGV2ZW50IGFuZCBpdHMgYXNzaWdubWVudHNcbiAgICAgICAgY29uc3QgZGVsZXRlZEV2ZW50ID0gZGF0YS5ldmVudHMuc3BsaWNlKGV2ZW50SW5kZXgsIDEpWzBdO1xuICAgICAgICBkYXRhLmFzc2lnbm1lbnRzID0gZGF0YS5hc3NpZ25tZW50cy5maWx0ZXIoYSA9PiBhLmV2ZW50SWQgIT09IGlkKTtcbiAgICAgICAgd3JpdGVEYXRhKGRhdGEpO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdFdmVudCBkZWxldGVkIHN1Y2Nlc3NmdWxseScsIGV2ZW50OiBkZWxldGVkRXZlbnQgfSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCB0eXBlIHBhcmFtZXRlcicgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiZGF0YUZpbGVQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJlbnN1cmVEYXRhRGlyZWN0b3J5RXhpc3RzIiwiZGF0YURpciIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJpbml0aWFsaXplRGF0YUZpbGUiLCJpbml0aWFsRGF0YSIsInVzZXJzIiwiZXZlbnRzIiwiYXNzaWdubWVudHMiLCJ3cml0ZUZpbGVTeW5jIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwicmVhZERhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJ3cml0ZURhdGEiLCJkYXRhIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImluY2x1ZGVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsInR5cGUiLCJpZCIsInVzZXJJZCIsInJvbGUiLCJxdWVyeSIsImZpbmQiLCJ1IiwiaGFzQXNzaWdubWVudCIsInNvbWUiLCJhIiwiZ2l2ZXJJZCIsInJlY2VpdmVySWQiLCJlIiwidXNlckV2ZW50cyIsImZpbHRlciIsInBhcnRpY2lwYW50cyIsImFkbWluSWQiLCJldmVudCIsImV2ZW50SWQiLCJwYXlsb2FkIiwiYm9keSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJuZXdVc2VyIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwicHVzaCIsInVzZXJXaXRob3V0UGFzc3dvcmQiLCJuYW1lIiwibmV3RXZlbnQiLCJkZXNjcmlwdGlvbiIsImNyZWF0ZWQiLCJ0b0lTT1N0cmluZyIsImxlbmd0aCIsImdpdmVycyIsInJlY2VpdmVycyIsInZhbGlkQXNzaWdubWVudCIsImF0dGVtcHRzIiwibmV3QXNzaWdubWVudHMiLCJpIiwiaiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNlbGZBc3NpZ25tZW50IiwiZ2l2ZXIiLCJpbmRleCIsIm1hcCIsInVzZXJUb1VwZGF0ZSIsIk9iamVjdCIsImFzc2lnbiIsImV2ZW50VG9VcGRhdGUiLCJ1c2VySW5kZXgiLCJmaW5kSW5kZXgiLCJkZWxldGVkVXNlciIsInNwbGljZSIsIm1lc3NhZ2UiLCJ1c2VyIiwiZXZlbnRJbmRleCIsImRlbGV0ZWRFdmVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/secret-santa/data.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fdata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fdata.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();