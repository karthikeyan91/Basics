"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/secret-santa/auth";
exports.ids = ["pages/api/secret-santa/auth"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fauth.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fauth.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_secret_santa_auth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/secret-santa/auth.js */ \"(api)/./pages/api/secret-santa/auth.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_secret_santa_auth_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_secret_santa_auth_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/secret-santa/auth\",\n        pathname: \"/api/secret-santa/auth\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_secret_santa_auth_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNlY3JldC1zYW50YSUyRmF1dGgmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnNlY3JldC1zYW50YSUyRmF1dGguanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yc3MtZmVlZC12aWV3ZXIvPzY1ZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zZWNyZXQtc2FudGEvYXV0aC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NlY3JldC1zYW50YS9hdXRoXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2VjcmV0LXNhbnRhL2F1dGhcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fauth.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/secret-santa/auth.js":
/*!****************************************!*\
  !*** ./pages/api/secret-santa/auth.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Path to our data file\nconst dataFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\", \"secret-santa.json\");\n// Read data from file\nfunction readData() {\n    try {\n        if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dataFilePath)) {\n            return {\n                users: [],\n                events: [],\n                assignments: []\n            };\n        }\n        return JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(dataFilePath, \"utf8\"));\n    } catch (error) {\n        console.error(\"Error reading data file:\", error);\n        return {\n            users: [],\n            events: [],\n            assignments: []\n        };\n    }\n}\nasync function handler(req, res) {\n    // Only allow POST requests\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const { action } = req.query;\n    const data = readData();\n    if (!action) {\n        return res.status(400).json({\n            error: \"Action parameter is required\"\n        });\n    }\n    // Handle signup\n    if (action === \"signup\") {\n        const { username, password } = req.body;\n        if (!username || !password) {\n            return res.status(400).json({\n                error: \"Username and password are required\"\n            });\n        }\n        // Check if username already exists\n        if (data.users.some((u)=>u.username === username)) {\n            return res.status(409).json({\n                error: \"Username already exists\"\n            });\n        }\n        // Create new user\n        const newUser = {\n            id: Date.now().toString(),\n            username,\n            password,\n            role: \"participant\" // Default to participant role\n        };\n        // Add user to data file (using the data API)\n        try {\n            const response = await fetch(`${req.headers.origin}/api/secret-santa/data?type=users`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(newUser)\n            });\n            if (!response.ok) {\n                const errorData = await response.json();\n                return res.status(response.status).json(errorData);\n            }\n            const userData = await response.json();\n            // Create a session token (in a real app, use a proper JWT or session mechanism)\n            const sessionToken = Buffer.from(`${userData.id}:${userData.role}`).toString(\"base64\");\n            return res.status(201).json({\n                user: userData,\n                token: sessionToken\n            });\n        } catch (error) {\n            console.error(\"Error creating user:\", error);\n            return res.status(500).json({\n                error: \"Failed to create user\"\n            });\n        }\n    }\n    // Handle login\n    if (action === \"login\") {\n        const { username, password } = req.body;\n        if (!username || !password) {\n            return res.status(400).json({\n                error: \"Username and password are required\"\n            });\n        }\n        // Find user by username\n        const user = data.users.find((u)=>u.username === username);\n        if (!user) {\n            return res.status(401).json({\n                error: \"Invalid username or password\"\n            });\n        }\n        // Check password (in a real app, use proper password hashing)\n        if (user.password !== password) {\n            return res.status(401).json({\n                error: \"Invalid username or password\"\n            });\n        }\n        // Create a session token (in a real app, use a proper JWT or session mechanism)\n        const sessionToken = Buffer.from(`${user.id}:${user.role}`).toString(\"base64\");\n        // Don't return the password in the response\n        const { password: _, ...userWithoutPassword } = user;\n        return res.status(200).json({\n            user: userWithoutPassword,\n            token: sessionToken\n        });\n    }\n    // Handle verify token\n    if (action === \"verify\") {\n        const { token } = req.body;\n        if (!token) {\n            return res.status(400).json({\n                error: \"Token is required\"\n            });\n        }\n        try {\n            // Decode token (in a real app, use proper JWT verification)\n            const decoded = Buffer.from(token, \"base64\").toString(\"utf-8\");\n            const [userId, role] = decoded.split(\":\");\n            // Find user by ID\n            const user = data.users.find((u)=>u.id === userId);\n            if (!user) {\n                return res.status(401).json({\n                    error: \"Invalid token\"\n                });\n            }\n            // Don't return the password in the response\n            const { password, ...userWithoutPassword } = user;\n            return res.status(200).json({\n                user: userWithoutPassword,\n                token\n            });\n        } catch (error) {\n            console.error(\"Error verifying token:\", error);\n            return res.status(401).json({\n                error: \"Invalid token\"\n            });\n        }\n    }\n    // Handle logout (client-side only in this implementation)\n    if (action === \"logout\") {\n        return res.status(200).json({\n            message: \"Logged out successfully\"\n        });\n    }\n    return res.status(400).json({\n        error: \"Invalid action parameter\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZmVlZC12aWV3ZXIvLi9wYWdlcy9hcGkvc2VjcmV0LXNhbnRhL2F1dGguanM/NTA0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbi8vIFBhdGggdG8gb3VyIGRhdGEgZmlsZVxuY29uc3QgZGF0YUZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ3NlY3JldC1zYW50YS5qc29uJyk7XG5cbi8vIFJlYWQgZGF0YSBmcm9tIGZpbGVcbmZ1bmN0aW9uIHJlYWREYXRhKCkge1xuICB0cnkge1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhkYXRhRmlsZVBhdGgpKSB7XG4gICAgICByZXR1cm4geyB1c2VyczogW10sIGV2ZW50czogW10sIGFzc2lnbm1lbnRzOiBbXSB9O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoZGF0YUZpbGVQYXRoLCAndXRmOCcpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFkaW5nIGRhdGEgZmlsZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgdXNlcnM6IFtdLCBldmVudHM6IFtdLCBhc3NpZ25tZW50czogW10gfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIC8vIE9ubHkgYWxsb3cgUE9TVCByZXF1ZXN0c1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgY29uc3QgeyBhY3Rpb24gfSA9IHJlcS5xdWVyeTtcbiAgY29uc3QgZGF0YSA9IHJlYWREYXRhKCk7XG5cbiAgaWYgKCFhY3Rpb24pIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0FjdGlvbiBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQnIH0pO1xuICB9XG5cbiAgLy8gSGFuZGxlIHNpZ251cFxuICBpZiAoYWN0aW9uID09PSAnc2lnbnVwJykge1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICAgIGlmICghdXNlcm5hbWUgfHwgIXBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1VzZXJuYW1lIGFuZCBwYXNzd29yZCBhcmUgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHVzZXJuYW1lIGFscmVhZHkgZXhpc3RzXG4gICAgaWYgKGRhdGEudXNlcnMuc29tZSh1ID0+IHUudXNlcm5hbWUgPT09IHVzZXJuYW1lKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdVc2VybmFtZSBhbHJlYWR5IGV4aXN0cycgfSk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG5ldyB1c2VyXG4gICAgY29uc3QgbmV3VXNlciA9IHtcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICB1c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkLCAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHNob3VsZCBiZSBoYXNoZWRcbiAgICAgIHJvbGU6ICdwYXJ0aWNpcGFudCcgLy8gRGVmYXVsdCB0byBwYXJ0aWNpcGFudCByb2xlXG4gICAgfTtcblxuICAgIC8vIEFkZCB1c2VyIHRvIGRhdGEgZmlsZSAodXNpbmcgdGhlIGRhdGEgQVBJKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3JlcS5oZWFkZXJzLm9yaWdpbn0vYXBpL3NlY3JldC1zYW50YS9kYXRhP3R5cGU9dXNlcnNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3VXNlciksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKHJlc3BvbnNlLnN0YXR1cykuanNvbihlcnJvckRhdGEpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQ3JlYXRlIGEgc2Vzc2lvbiB0b2tlbiAoaW4gYSByZWFsIGFwcCwgdXNlIGEgcHJvcGVyIEpXVCBvciBzZXNzaW9uIG1lY2hhbmlzbSlcbiAgICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IEJ1ZmZlci5mcm9tKGAke3VzZXJEYXRhLmlkfToke3VzZXJEYXRhLnJvbGV9YCkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICB1c2VyOiB1c2VyRGF0YSxcbiAgICAgICAgdG9rZW46IHNlc3Npb25Ub2tlblxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHVzZXInIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBsb2dpblxuICBpZiAoYWN0aW9uID09PSAnbG9naW4nKSB7XG4gICAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVXNlcm5hbWUgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gRmluZCB1c2VyIGJ5IHVzZXJuYW1lXG4gICAgY29uc3QgdXNlciA9IGRhdGEudXNlcnMuZmluZCh1ID0+IHUudXNlcm5hbWUgPT09IHVzZXJuYW1lKTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBwYXNzd29yZCAoaW4gYSByZWFsIGFwcCwgdXNlIHByb3BlciBwYXNzd29yZCBoYXNoaW5nKVxuICAgIGlmICh1c2VyLnBhc3N3b3JkICE9PSBwYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBzZXNzaW9uIHRva2VuIChpbiBhIHJlYWwgYXBwLCB1c2UgYSBwcm9wZXIgSldUIG9yIHNlc3Npb24gbWVjaGFuaXNtKVxuICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IEJ1ZmZlci5mcm9tKGAke3VzZXIuaWR9OiR7dXNlci5yb2xlfWApLnRvU3RyaW5nKCdiYXNlNjQnKTtcblxuICAgIC8vIERvbid0IHJldHVybiB0aGUgcGFzc3dvcmQgaW4gdGhlIHJlc3BvbnNlXG4gICAgY29uc3QgeyBwYXNzd29yZDogXywgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gdXNlcjtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICB1c2VyOiB1c2VyV2l0aG91dFBhc3N3b3JkLFxuICAgICAgdG9rZW46IHNlc3Npb25Ub2tlblxuICAgIH0pO1xuICB9XG5cbiAgLy8gSGFuZGxlIHZlcmlmeSB0b2tlblxuICBpZiAoYWN0aW9uID09PSAndmVyaWZ5Jykge1xuICAgIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUb2tlbiBpcyByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIERlY29kZSB0b2tlbiAoaW4gYSByZWFsIGFwcCwgdXNlIHByb3BlciBKV1QgdmVyaWZpY2F0aW9uKVxuICAgICAgY29uc3QgZGVjb2RlZCA9IEJ1ZmZlci5mcm9tKHRva2VuLCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0Zi04Jyk7XG4gICAgICBjb25zdCBbdXNlcklkLCByb2xlXSA9IGRlY29kZWQuc3BsaXQoJzonKTtcblxuICAgICAgLy8gRmluZCB1c2VyIGJ5IElEXG4gICAgICBjb25zdCB1c2VyID0gZGF0YS51c2Vycy5maW5kKHUgPT4gdS5pZCA9PT0gdXNlcklkKTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnSW52YWxpZCB0b2tlbicgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHJldHVybiB0aGUgcGFzc3dvcmQgaW4gdGhlIHJlc3BvbnNlXG4gICAgICBjb25zdCB7IHBhc3N3b3JkLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyO1xuXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICB1c2VyOiB1c2VyV2l0aG91dFBhc3N3b3JkLFxuICAgICAgICB0b2tlblxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyB0b2tlbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdG9rZW4nIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBsb2dvdXQgKGNsaWVudC1zaWRlIG9ubHkgaW4gdGhpcyBpbXBsZW1lbnRhdGlvbilcbiAgaWYgKGFjdGlvbiA9PT0gJ2xvZ291dCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTG9nZ2VkIG91dCBzdWNjZXNzZnVsbHknIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGFjdGlvbiBwYXJhbWV0ZXInIH0pO1xufSJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJkYXRhRmlsZVBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsInJlYWREYXRhIiwiZXhpc3RzU3luYyIsInVzZXJzIiwiZXZlbnRzIiwiYXNzaWdubWVudHMiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJlcnJvciIsImNvbnNvbGUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImFjdGlvbiIsInF1ZXJ5IiwiZGF0YSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJib2R5Iiwic29tZSIsInUiLCJuZXdVc2VyIiwiaWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJyb2xlIiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJvcmlnaW4iLCJzdHJpbmdpZnkiLCJvayIsImVycm9yRGF0YSIsInVzZXJEYXRhIiwic2Vzc2lvblRva2VuIiwiQnVmZmVyIiwiZnJvbSIsInVzZXIiLCJ0b2tlbiIsImZpbmQiLCJfIiwidXNlcldpdGhvdXRQYXNzd29yZCIsImRlY29kZWQiLCJ1c2VySWQiLCJzcGxpdCIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/secret-santa/auth.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsecret-santa%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsecret-santa%2Fauth.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();